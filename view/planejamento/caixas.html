<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minhas Caixas</title>
    <link rel="stylesheet" href="../gastos/style.css">
    <link rel="stylesheet" href="caixa.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

    <div class="container-app">
        <nav class="barra-lateral">
            <div class="area-logo"><img src="../assets/image.png" alt="Logo" class="icone-nav logo-img"></div>
            <ul class="nav-lateral">
                <li class="item-nav">
                    <a href="../gastos/gastos.html" class="link-nav" title="Home">
                        <img src="../assets/gastos.png" class="icone-nav" alt="Home">
                    </a>
                </li>

                <li class="item-nav ativo">
                    <a href="../planejamento/caixas.html" class="link-nav" title="Caixas">
                        <img src="../assets/planejamento.png" class="icone-nav" alt="Caixas">
                    </a>
                </li>

                <li class="item-nav">
                    <a href="../categoria/categoria.html" class="link-nav" title="Categorias">
                        <img src="../assets/categoria.webp" class="icone-nav" alt="Categorias">
                    </a>
                </li>

                <li class="item-nav" style="margin-top: auto;">
                    <a href="../perfil/perfil.html" class="link-nav" id="btn-abrir-usuario" title="Minha Conta">
                        <img src="../assets/user.svg" class="icone-nav" alt="Perfil">
                    </a>
                </li>
            </ul>
        </nav>

        <div class="wrapper-principal">

            <main class="area-conteudo-dividida">

                <section class="painel-lista">
                    <div class="cabecalho-painel-lista">
                        <h2 class="titulo-painel-lista">Suas Metas</h2>
                        <button class="botao-acao botao-acao--receita" onclick="abrirModalCriacao()">+ Nova</button>
                    </div>
                    <div class="conteudo-lista"></div>
                </section>

                <section class="painel-detalhe">
                    <header class="cabecalho-detalhe">
                        <div class="icone-detalhe" style="background-color: #ccc;"></div>
                        <h2 class="titulo-detalhe">Selecione uma meta</h2>

                        <div class="acoes-detalhe" style="margin-left: auto; display: none; gap: 10px;">
                            <button id="btn-depositar-meta" class="botao-acao botao-acao--receita"
                                style="padding: 8px 15px;">Depositar</button>
                            <button id="btn-excluir-meta" class="btn-pequeno btn-excluir"
                                style="width: 35px; height: 35px;">üóëÔ∏è</button>
                        </div>
                    </header>

                    <div class="resumo-detalhe">
                        <div class="info-resumo">
                            <div class="item-info">
                                <span class="rotulo-info">Meta Total</span>
                                <span class="valor-info" id="detalhe-valor-total">---</span>
                            </div>
                            <div class="item-info">
                                <span class="rotulo-info">Falta</span>
                                <span class="valor-info destaque" id="detalhe-falta">---</span>
                            </div>
                            <div class="item-info">
                                <span class="rotulo-info">Mensal</span>
                                <span class="valor-info" id="detalhe-valor-mensal">---</span>
                            </div>
                            <div class="item-info tempo-restante">
                                <span class="rotulo-info">Tempo Estimado</span>
                                <span class="valor-info" id="detalhe-tempo">---</span>
                            </div>
                        </div>
                        <div class="grafico-donut-container">
                            <canvas id="graficoDonut"></canvas>
                        </div>
                    </div>

                    <div class="area-graficos">
                        <div class="container-grafico-card">
                            <h4 class="titulo-grafico">Proje√ß√£o Futura</h4>
                            <div class="canvas-wrapper"><canvas id="graficoCrescimento"></canvas></div>
                        </div>
                        <div class="container-grafico-card">
                            <h4 class="titulo-grafico">Progresso Atual</h4>
                            <div class="canvas-wrapper"><canvas id="graficoDepositos"></canvas></div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <div class="modal-fundo" id="modal-config-caixa">
        <div class="modal-conteudo">
            <div class="cabecalho-modal">
                <h2 class="titulo-modal" id="modal-titulo">Nova Meta</h2>
                <button class="fechar-modal" onclick="fecharModalConfig()">√ó</button>
            </div>
            <form class="formulario-transacao" id="config-caixa-form" novalidate>

                <div class="grupo-form">
                    <label class="rotulo-form">Nome da Meta</label>
                    <input type="text" id="config-nome" class="input-form" required
                        placeholder="Ex: Viagem, Carro Novo...">
                </div>

                <div class="grupo-form">
                    <label class="rotulo-form">Categoria</label>
                    <select id="config-categoria" class="input-form" required>
                        <option value="">Carregando categorias...</option>
                    </select>
                </div>

                <div class="grupo-form-linha">
                    <div class="grupo-form">
                        <label class="rotulo-form">Meta Final (R$)</label>
                        <input type="number" id="config-valor-total" class="input-form" step="0.01" required>
                    </div>
                    <div class="grupo-form">
                        <label class="rotulo-form">J√° tem (R$)</label>
                        <input type="number" id="config-valor-atual" class="input-form" step="0.01" value="0">
                    </div>
                </div>
                <div class="grupo-form-linha">
                    <div class="grupo-form">
                        <label class="rotulo-form">Dep√≥sito Mensal esperado (R$)</label>
                        <input type="number" id="config-mensal" class="input-form" step="0.01" placeholder="Estimativa">
                    </div>
                    <div class="grupo-form">
                        <label class="rotulo-form">Cor</label>
                        <input type="color" id="config-cor" class="input-form" style="height:48px; cursor:pointer;"
                            value="#f39c12">
                    </div>
                </div>
                <div class="acoes-form">
                    <button type="button" class="botao-form-cancelar" onclick="fecharModalConfig()">Cancelar</button>
                    <button type="submit" class="botao-form-enviar">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal-fundo" id="modal-deposito">
        <div class="modal-conteudo">
            <div class="cabecalho-modal">
                <h2 class="titulo-modal">Novo Dep√≥sito</h2>
                <button class="fechar-modal" onclick="fecharModalDeposito()">√ó</button>
            </div>
            <form class="formulario-transacao" id="form-deposito" novalidate>
                <p style="margin-bottom: 20px; color: #666;">Quanto voc√™ quer guardar para <strong
                        id="nome-meta-deposito"></strong>?</p>
                <div class="grupo-form">
                    <label class="rotulo-form">Valor (R$)</label>
                    <input type="number" id="deposito-valor" class="input-form" step="0.01" required placeholder="0,00">
                </div>
                <div class="grupo-form">
                    <label class="rotulo-form">Data</label>
                    <input type="date" id="deposito-data" class="input-form" required>
                </div>
                <div class="acoes-form">
                    <button type="button" class="botao-form-cancelar" onclick="fecharModalDeposito()">Cancelar</button>
                    <button type="submit" class="botao-form-enviar">Confirmar Dep√≥sito</button>
                </div>
            </form>
        </div>
    </div>

    <div id="container-notificacoes"></div>

    <div class="modal-fundo" id="modal-aviso-exclusao" style="display: none;">
        <div class="modal-aviso-conteudo">
            <h3 class="titulo-aviso">Excluir Meta?</h3>
            <p class="texto-aviso">
                Voc√™ tem certeza que deseja excluir a meta <strong id="nome-meta-excluir">...</strong>?
                <br>O hist√≥rico de dep√≥sitos ser√° mantido nos gastos, mas a meta sumir√°.
            </p>
            <div class="acoes-aviso">
                <button class="btn-cancelar-aviso" onclick="fecharModalAviso()">Cancelar</button>
                <button class="btn-confirmar-aviso" id="btn-confirmar-exclusao">Sim, excluir</button>
            </div>
        </div>
    </div>

    <script src="script-caixas.js"></script>
</body>

</html>